"use strict";(self["webpackChunkvan_web_ui"]=self["webpackChunkvan_web_ui"]||[]).push([[824],{3824:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("div",{staticClass:"login-form"},[e("el-form",{ref:"loginForm",attrs:{size:"medium",model:t.loginForm,rules:t.loginFormRules}},[e("el-form-item",{attrs:{prop:"enterprise"}},[e("el-input",{attrs:{type:"text",placeholder:"请输入企业","prefix-icon":"iconfont icon-qiyeyuanquwuye"},model:{value:t.loginForm.enterprise,callback:function(e){t.$set(t.loginForm,"enterprise","string"===typeof e?e.trim():e)},expression:"loginForm.enterprise"}})],1),e("el-form-item",{attrs:{prop:"mailbox"}},[e("el-input",{attrs:{type:"text",placeholder:"请输入邮箱","prefix-icon":"iconfont icon-youxiang"},model:{value:t.loginForm.mailbox,callback:function(e){t.$set(t.loginForm,"mailbox","string"===typeof e?e.trim():e)},expression:"loginForm.mailbox"}})],1),e("el-form-item",{attrs:{prop:"password"}},[e("el-input",{attrs:{type:t.isPassword?"text":"password",placeholder:"请输入密码","prefix-icon":"iconfont icon-mima"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password","string"===typeof e?e.trim():e)},expression:"loginForm.password"}},[e("i",{class:t.isPassword?"iconfont icon-kejian":"iconfont icon-biyanjing",attrs:{slot:"suffix"},on:{click:function(e){t.isPassword=!t.isPassword}},slot:"suffix"})])],1),e("el-form-item",{staticClass:"login-certificate",attrs:{prop:"captcha"}},[e("el-input",{staticClass:"inputCheckCode",attrs:{type:"text",placeholder:"请输入验证码","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("loginForm")}},model:{value:t.loginForm.captcha,callback:function(e){t.$set(t.loginForm,"captcha","string"===typeof e?e.trim():e)},expression:"loginForm.captcha"}}),e("img",{staticClass:"captchaImg",attrs:{src:t.captchaImg,alt:""},on:{click:t.refreshCaptchaImg}})],1),e("el-form-item",[e("el-button",{staticClass:"login-submit",attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.login("loginForm")}}},[t._v(" 登 录 控 制 台")])],1)],1)],1)])},o=[],a=i(950),s={data(){return{loginForm:{enterprise:"labs",mailbox:"labs@aivanlink.com",password:"Vdm@labs999",captcha:""},loginFormRules:{enterprise:[{required:!0,message:"请输入企业",trigger:"blur"}],mailbox:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:function(t,e,i){0==/^\w+@([\da-z.-]+)\.([a-z]+|[\u2E80-\u9FFF]+)$/.test(e)?i(new Error("请输入正确的邮箱格式")):i()},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,e,i){0==/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&_.])[A-Za-z\d$@$!%*?&]{8,}/.test(e)?i(new Error("请输入8位以上包含数字大小写字母特殊字符的密码")):i()},trigger:"blur"}],captcha:[{required:!0,message:"验证码",trigger:"blur"}]},isPassword:!1,captchaImg:""}},methods:{getCaptchaImg(){this.uuid=this.$randomUUID(),a.Z.getCaptchaImg({uuid:this.uuid}).then((t=>{this.captchaImg=t.data.data}))},refreshCaptchaImg(){this.getCaptchaImg()},login(t){this.$refs[t].validate((t=>{if(!t)return this.getCaptchaImg(),!1;{const t={captcha:this.loginForm.captcha,password:this.loginForm.password,username:this.loginForm.enterprise+"\\"+this.loginForm.mailbox,uuid:this.uuid};a.Z.postLogin(t).then((t=>{200==t.data.code?(this.$store.commit("setAppTokenInfo",t.data.data),this.$store.dispatch("getLoginUserData").then((()=>{this.$router.replace({path:this.$route.query.redirect?this.$route.query.redirect:"/"})}))):this.getCaptchaImg()}),(()=>{this.getCaptchaImg()}))}}))}},mounted(){this.getCaptchaImg()}},n=s,l=i(1001),c=(0,l.Z)(n,r,o,!1,null,"715e68fc",null),p=c.exports}}]);